"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e=require("electron"),d=require("os"),t=require("path");const c=require("child_process").spawn;d.release().startsWith("6.1")&&e.app.disableHardwareAcceleration();process.platform==="win32"&&e.app.setAppUserModelId(e.app.getName());e.app.requestSingleInstanceLock()||(e.app.quit(),process.exit(0));const s={dist:t.join(__dirname,"../.."),public:t.join(__dirname,e.app.isPackaged?"../..":"../../../public")};let n=null;const r=t.join(__dirname,"../preload/index.js"),l="http://localhost:3000",w=t.join(s.dist,"index.html");async function p(){n=new e.BrowserWindow({title:"Main window",icon:t.join(s.public,"favicon.ico"),webPreferences:{preload:r,nodeIntegration:!0,contextIsolation:!1}}),n.loadURL(l),n.webContents.openDevTools(),n.webContents.on("did-finish-load",()=>{n==null||n.webContents.send("main-process-message",new Date().toLocaleString())}),n.webContents.setWindowOpenHandler(({url:o})=>(o.startsWith("https:")&&e.shell.openExternal(o),{action:"deny"}))}e.app.whenReady().then(c("yarn",["graphql-dev"]).stdout.on("spawn",o=>{console.log(o)}).on("error",o=>{throw console.log(o),o})).then(p);e.app.on("window-all-closed",()=>{n=null,process.platform!=="darwin"&&e.app.quit()});e.app.on("second-instance",()=>{n&&(n.isMinimized()&&n.restore(),n.focus())});e.app.on("activate",()=>{const o=e.BrowserWindow.getAllWindows();o.length?o[0].focus():p()});e.ipcMain.handle("open-win",(o,a)=>{const i=new e.BrowserWindow({webPreferences:{preload:r}});e.app.isPackaged?i.loadFile(w,{hash:a}):(i.loadURL(`${l}/#${a}`),i.webContents.openDevTools({mode:"undocked",activate:!0}))});exports.ROOT_PATH=s;
//# sourceMappingURL=index.js.map
